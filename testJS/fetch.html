<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>GFG User Details</title>
</head>

<body>
    <script>
        /**/
        /*
        // API for get requests
        let fetchRes = fetch(
            "https://jsonplaceholder.typicode.com/users");
        // fetchRes is the promise to resolve
        // it by using.then() method
        fetchRes.then(res =>
            res.json()).then(d => {
            console.log(d) //dữ liệu trả về
        })
        */



        /*
                fetch('https://jsonplaceholder.typicode.com/users')
                    .then((response) => response.json())
                    .then((data) => console.log(data));
                    */
        /*
                fetch('https://jsonplaceholder.typicode.com/users')
                    .then(response => response.json()) //automatically parse a Json response in to a javaScript
                    .then(json => console.log(JSON.stringify(json)))

        */
        /*
        fetch("https://jsonplaceholder.typicode.com/users").then((response) => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Something went wrong');
            })
            .then((responseJson) => {
                // Do something with the response
            })
            .catch((error) => {
                console.log(error)
            });
            */

        /*
        fetch('https://jsonplaceholder.typicode.com/users', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "id": 1
                })
            })
            .then(response => response.json())

*/

        /*
        fetch("https://jsonplaceholder.typicode.com/users")
            .then(function(data) {
                console.log("data");
            }).catch(function() {
                console.log("error");
            });
            */




        /*
                fetch("https://jsonplaceholder.typicode.com/users")
                    .then(response => {
                        if (!response.ok) {
                            throw response
                        }
                        return response.json() //we only get here if there is no error
                    })
                    .then(json => {
                        this.props.dispatch(doSomethingWithResult(json))
                    })
                    .catch(err => {
                        err.text().then(errorMessage => {
                            this.props.dispatch(displayTheError(errorMessage))
                        })
                    })

                    */


        async function makeRequest() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users');

                console.log('status code: ', response.status); // success return: 200


                if (!response.ok) {
                    console.log(response);
                    throw new Error(`Error! status: ${response.status}`); //fail
                }

                const result = await response.json();
                return result;
            } catch (err) {
                console.log(err);
            }
        }

        makeRequest();


        /*
                fetch('https://jsonplaceholder.typicode.com/users')
                    //.then(res => res.json()) // no error is thrown
                    .then((response) => response.json())
                    .then(() => console.log("Success")) // 
                    .catch(() => console.log("Error")) // fails to catch error
        */
    </script>

</body>

</html>